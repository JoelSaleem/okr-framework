# Migration `20200627102214`

This migration has been generated by JoelSaleem at 6/27/2020, 10:22:14 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."KeyResult" (
"current" integer  NOT NULL ,"description" text   ,"id" SERIAL,"parentId" integer   ,"target" integer  NOT NULL ,"title" text  NOT NULL ,"userId" integer  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."KeyResult" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."KeyResult" ADD FOREIGN KEY ("parentId")REFERENCES "public"."Objecive"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."KeyResult" ADD FOREIGN KEY ("parentId")REFERENCES "public"."KeyResult"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200626214727..20200627102214
--- datamodel.dml
+++ datamodel.dml
@@ -1,29 +1,46 @@
 datasource postgres {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 // This "Example" model has been generated for you by Nexus.
 // Nexus does this when you do not have any models defined.
 // For more detail and examples of working with your Prisma
 // Schema, refer to its complete docs at https://pris.ly/d/prisma-schema.
 model Objecive {
-  id          Int      @id @default(autoincrement())
+  id          Int         @id @default(autoincrement())
   title       String
   description String?
   createdAt   DateTime
-  user        User     @relation(fields: [userId], references: [id])
+  user        User        @relation(fields: [userId], references: [id])
   userId      Int
+  KeyResult   KeyResult[]
 }
+model KeyResult {
+  id              Int        @id @default(autoincrement())
+  title           String
+  description     String?
+  target          Int
+  current         Int
+  user            User       @relation(fields: [userId], references: [id])
+  userId          Int
+  parentobjective Objecive?  @relation(fields: [parentId], references: [id])
+  parentResult    KeyResult? @relation(fields: [parentId], references: [id])
+  parentId        Int?
+
+  KeyResult KeyResult[] @relation("KeyResultToKeyResult")
+}
+
 model User {
-  id         Int        @id @default(autoincrement())
-  email      String     @unique
+  id         Int         @id @default(autoincrement())
+  email      String      @unique
   password   String
   objectives Objecive[]
   createdAt  DateTime
+  KeyResult  KeyResult[]
 }
 generator prisma_client {
   provider = "prisma-client-js"
```


